<script setup lang="ts">
import {
  TariffCard,
  StatsList,
  Support,
  TariffFeature,
  PaymentInfoComponent,
} from '@/components/tariffs';
import { ref } from 'vue';

const props = withDefaults(
  defineProps<{
    wait?: boolean;
  }>(),
  { wait: false },
);

const selectedPrice = ref<number>(0);

const isTariffSelected = (price: number): boolean => props.wait && selectedPrice.value === price;

const emit = defineEmits<{
  (e: 'actionClick', price: number): void;
}>();

const onActionClick = (price: number) => {
  selectedPrice.value = price;
  emit('actionClick', price);
};
</script>
<template>
  <div class="tariffs-container">
    <div class="tariffs">
      <TariffCard
        guaranteeIcon="shield-alt"
        :price="19900"
        :old-price="24900"
        :per-month="19900"
        :economy="50"
        :wait="isTariffSelected(19900)"
        discount="-20%"
        @actionClick="onActionClick"
      >
        <template #term> 1 –º–µ—Å—è—Ü </template>
        <template #features>
          <TariffFeature bold>–ü–æ–ª–Ω–∞—è –∞–Ω–æ–Ω–∏–º–Ω–æ—Å—Ç—å</TariffFeature>
          <TariffFeature>–í—ã—Å–æ–∫–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å</TariffFeature>
          <TariffFeature>–ù–µ–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–π —Ç—Ä–∞—Ñ–∏–∫</TariffFeature>
          <TariffFeature>–ü–æ–¥–¥–µ—Ä–∂–∫–∞ 24/7</TariffFeature>
        </template>
        <template #buttonText> üî• –í—ã–±—Ä–∞—Ç—å —Ç–∞—Ä–∏—Ñ </template>
        <template #guarantee> Military Grade –∑–∞—â–∏—Ç–∞ </template>
      </TariffCard>

      <TariffCard
        guaranteeIcon="crown"
        :price="49900"
        :old-price="747700"
        :per-month="16800"
        :economy="248"
        :wait="isTariffSelected(49900)"
        discount="-30%"
        @actionClick="onActionClick"
      >
        <template #term> 3 –º–µ—Å—è—Ü–∞ </template>
        <template #features>
          <TariffFeature bold>–í—Å—ë –∏–∑ —Ç–∞—Ä–∏—Ñ–∞ 1 –º–µ—Å—è—Ü</TariffFeature>
          <TariffFeature>–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞</TariffFeature>
          <TariffFeature>–†–µ–∑–µ—Ä–≤–Ω—ã–µ —Å–µ—Ä–≤–µ—Ä—ã</TariffFeature>
          <TariffFeature>–ê–≤—Ç–æ-–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ</TariffFeature>
        </template>
        <template #buttonText> üöÄ –í—ã–±—Ä–∞—Ç—å —Ç–∞—Ä–∏—Ñ </template>
        <template #guarantee> –ü–æ–ø—É–ª—è—Ä–Ω—ã–π –≤—ã–±–æ—Ä </template>
      </TariffCard>

      <TariffCard
        guaranteeIcon="star"
        :price="89900"
        :old-price="179400"
        :per-month="12800"
        :economy="895"
        :wait="isTariffSelected(89900)"
        discount="-50%"
        isPopular
        @actionClick="onActionClick"
      >
        <template v-slot:term> 6 –º–µ—Å—è—Ü–µ–≤ + 1 –≤ –ø–æ–¥–∞—Ä–æ–∫ </template>
        <template v-slot:features>
          <TariffFeature bold>–í—Å—ë –∏–∑ —Ç–∞—Ä–∏—Ñ–∞ 3 –º–µ—Å—è—Ü–∞</TariffFeature>
          <TariffFeature>+1 –º–µ—Å—è—Ü –ë–ï–°–ü–õ–ê–¢–ù–û</TariffFeature>
          <TariffFeature>–í—ã–¥–µ–ª–µ–Ω–Ω—ã–π –∫–∞–Ω–∞–ª</TariffFeature>
          <TariffFeature>–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç —Å–∫–æ—Ä–æ—Å—Ç–∏</TariffFeature>
        </template>
        <template #buttonText> üíé –í–´–ë–†–ê–¢–¨ –í–´–ì–û–î–£ </template>
        <template #guarantee> –î–ª—è –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª–æ–≤ </template>
      </TariffCard>

      <TariffCard
        guaranteeIcon="shield-alt"
        :price="199900"
        :old-price="358800"
        :per-month="13300"
        :economy="1589"
        :wait="isTariffSelected(199900)"
        discount="-45%"
        @actionClick="onActionClick"
      >
        <template v-slot:term> 12 –º–µ—Å—è—Ü–µ–≤ + 3 –≤ –ø–æ–¥–∞—Ä–æ–∫ </template>
        <template v-slot:features>
          <TariffFeature bold>–í—Å—ë –∏–∑ –ø—Ä–µ–º–∏—É–º-—Ç–∞—Ä–∏—Ñ–∞</TariffFeature>
          <TariffFeature>+3 –º–µ—Å—è—Ü–∞ –ë–ï–°–ü–õ–ê–¢–ù–û</TariffFeature>
          <TariffFeature>–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å</TariffFeature>
          <TariffFeature>–ü—Ä–µ–º–∏—É–º –ø–æ–¥–¥–µ—Ä–∂–∫–∞</TariffFeature>
        </template>
        <template #buttonText> üöÄ –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –∑–∞—â–∏—Ç–∞ </template>
        <template #guarantee> SSL –∑–∞—â–∏—Ç–∞ ‚Ä¢ –ë–µ–∑–æ–ø–∞—Å–Ω—ã–µ –ø–ª–∞—Ç–µ–∂–∏ </template>
      </TariffCard>
    </div>
    <StatsList />
    <PaymentInfoComponent />
    <Support
      vk="https://vk.com/halal_it"
      subject="–í–æ–ø—Ä–æ—Å –ø–æ Halal VPN"
      body="–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ! –£ –º–µ–Ω—è –≤–æ–ø—Ä–æ—Å –ø–æ —É—Å–ª—É–≥–∞–º VPN:"
    />
  </div>
</template>
<style lang="scss" scoped>
.tariffs-container {
  padding: 25px 15px;
  opacity: 1;
  transform: translateY(0px);
  transition:
    opacity 0.5s,
    transform 0.5s;

  .tariffs {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 20px;
    margin-bottom: 20px;
  }
}

@media (max-width: 768px) {
  .tariffs-container {
    padding: 20px 10px;
  }

  .tariffs {
    grid-template-columns: 1fr;
    gap: 15px;
  }
}

@media (max-width: 480px) {
  .tariff {
    padding: 18px 12px;
  }
}

@media (max-width: 360px) {
  .tariffs-container {
    padding: 12px 8px;
  }
}
</style>
