{"openapi":"3.1.0","info":{"title":"Outline VPN","version":"1.0"},"paths":{"/api/health":{"get":{"tags":["server"],"summary":"Health","description":"Проверка работоспособности сервиса.","operationId":"health","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/order/check":{"get":{"tags":["server"],"summary":"Check Order","description":"Проверка наличия заказа в системе.","operationId":"check_order","parameters":[{"name":"task_guid","in":"query","required":true,"schema":{"type":"string","description":"Идентификатор заказа","title":"Task Guid"},"description":"Идентификатор заказа"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CheckOrderResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/order/{task_guid}/":{"get":{"tags":["server"],"summary":"Get Order","operationId":"get_order","parameters":[{"name":"task_guid","in":"path","required":true,"schema":{"type":"string","title":"Task Guid"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/payment/url":{"get":{"tags":["server"],"summary":"Get Payment Url","description":"Получить URL на оплату заказа.","operationId":"get_payment_url","parameters":[{"name":"task_guid","in":"query","required":true,"schema":{"type":"string","description":"Идентификатор заказа","title":"Task Guid"},"description":"Идентификатор заказа"},{"name":"is_recurrent","in":"query","required":false,"schema":{"type":"boolean","description":"Признак рекуррентности платежа","default":false,"title":"Is Recurrent"},"description":"Признак рекуррентности платежа"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/GetPaymentUrlResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/payment/status":{"post":{"tags":["server"],"summary":"Payment Status Update","description":"Обновить статус платежа через систему банка.","operationId":"payment_status_update","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/NotificationPaymentRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/payment/charge":{"post":{"tags":["server"],"summary":"Payment Charge","description":"Провести автоматический периодический платеж.","operationId":"payment_charge","parameters":[{"name":"authorization","in":"header","required":false,"schema":{"type":"string","title":"Authorization"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PaymentChargeRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/subscription/reject":{"patch":{"tags":["server"],"summary":"Subscription Reject","description":"Отменить активную подписку","operationId":"subscription_reject","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SubscriptionRejectRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}}},"components":{"schemas":{"CheckOrderResponse":{"properties":{"is_valid":{"type":"boolean","title":"Is Valid"}},"type":"object","required":["is_valid"],"title":"CheckOrderResponse"},"GetPaymentUrlResponse":{"properties":{"url":{"type":"string","title":"Url"}},"type":"object","required":["url"],"title":"GetPaymentUrlResponse"},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"NotificationPaymentRequest":{"properties":{"TerminalKey":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Идентификатор терминала"},"Amount":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Сумма в копейках"},"OrderId":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Идентификатор заказа в системе мерчанта"},"Success":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Успешность прохождения запроса"},"Status":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Статус платежа"},"PaymentId":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Уникальный идентификатор транзакции в системе Т‑Кассы"},"ErrorCode":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Код ошибки. 0 в случае успеха"},"Message":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Краткое описание ошибки"},"Details":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Подробное описание ошибки"},"RebillId":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Идентификатор автоплатежа"},"CardId":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Идентификатор карты в системе Т‑Кассы"},"Pan":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Замаскированный номер карты или телефона"},"ExpDate":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Срок действия карты в формате MMYY, где YY — две последние цифры года"},"Token":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Подпись запроса. Формируется по такому же принципу, как и в случае запросов в Т‑Кассу."},"Data":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Дополнительные параметры платежа, переданные при создании заказа. "}},"type":"object","title":"NotificationPaymentRequest"},"PaymentChargeRequest":{"properties":{"task_guid":{"type":"string","title":"Идентификатор задания на оплату"}},"type":"object","required":["task_guid"],"title":"PaymentChargeRequest"},"SubscriptionRejectRequest":{"properties":{"task_guid":{"type":"string","title":"Task Guid"}},"type":"object","required":["task_guid"],"title":"SubscriptionRejectRequest"},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"}}}}